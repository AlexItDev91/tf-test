<?php

use App\Repositories\Implementations\Eloquent\{{ repository_class }};
use Illuminate\Contracts\Pagination\LengthAwarePaginator;
use Illuminate\Database\Eloquent\ModelNotFoundException;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Support\Collection;

uses(RefreshDatabase::class);

it('returns null for findById when model does not exist', function () {
    $repo = new {{ repository_class }}();

    expect($repo->findById(999999999))->toBeNull();
});

it('throws for findOrFail when model does not exist', function () {
    $repo = new {{ repository_class }}();

    $repo->findOrFail(999999999);
})->throws(ModelNotFoundException::class);

it('returns collection for getAll/get', function () {
    $repo = new {{ repository_class }}();

    expect($repo->getAll())->toBeInstanceOf(Collection::class);
    expect($repo->get(limit: 50, offset: 0))->toBeInstanceOf(Collection::class);
});

it('returns paginator for paginate', function () {
    $repo = new {{ repository_class }}();

    expect($repo->paginate(perPage: 15))->toBeInstanceOf(LengthAwarePaginator::class);
});
